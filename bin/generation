#!/usr/bin/env node
var lib = require('../lib');
var num_generations = process.argv[2] || 5;
var results = lib.runners.generation(lib.strategies, num_generations);

function count (list) {
  var counts = {};
  list
  .map(function (x) {
    return x[0];
  })
  .forEach(function (x) {
    if (x in counts)
      counts[x]++;
    else
      counts[x] = 1;
  });
  return counts;
}

results.forEach(function (generation, i) {
  console.log('\nGeneration', i+1);
  var counts = count(generation);
  Object.keys(counts).map(function (name) {
    return [name, counts[name]];
  }).sort(function (a, b) {
    return b[1] - a[1];
  }).forEach(function (strategy, j) {
    console.log('#'+String(j+1), strategy[1], strategy[0]);
  });
});
